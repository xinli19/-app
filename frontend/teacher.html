<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>æ•™å¸ˆå·¥ä½œå°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- ç§»é™¤ teacher.cssï¼Œé¿å…è¦†ç›– operator-notion çš„ä¾§è¾¹æ ä¸å¯¼èˆªé£æ ¼ -->
  <!-- <link href="css/teacher.css" rel="stylesheet" /> -->
  <!-- å·²ç§»é™¤é¡µé¢å†…è”æ ·å¼ -->
  <!-- ä½¿ç”¨ç»Ÿä¸€ Notion é£æ ¼ -->
  <link rel="stylesheet" href="css/operator-notion.css">
  <style>
    /* æ•™å¸ˆå…¬å‘Šæ æ”¶èµ·æ ·å¼ï¼šæ”¶èµ·æ—¶éšè—å†…å®¹åŒºåŸŸ */
    .teacher-board.collapsed .board-content { display: none; }
    /* å¯é€‰ï¼šæ”¶èµ·æ—¶åœ¨å¤´éƒ¨æ˜¾ç¤ºç»†åˆ†éš”çº¿ï¼Œä¿æŒå±‚æ¬¡æ„Ÿ */
    .teacher-board.collapsed .board-header { border-bottom: 1px solid #e5e7eb; }
  </style>
  <script>
    // ç»Ÿä¸€åç«¯åŸºç¡€åœ°å€
    window.API_BASE = 'http://127.0.0.1:8000';
  </script>
</head>
<body>
  <div class="app-container">
    <header class="header">
      <div class="header-content">
        <div class="header-left">
          <button id="sidebarToggleBtn" class="icon-btn" aria-label="æŠ˜å ä¾§è¾¹æ ">â˜°</button>
          <h1 class="logo">æ•™å¸ˆå·¥ä½œå°</h1>
        </div>
        <div class="user-info">
          <span class="username" id="username"></span>
          <button class="logout-btn btn" id="logoutBtn">é€€å‡ºç™»å½•</button>
        </div>
      </div>
    </header>

    <aside class="sidebar">
      <nav class="nav-menu" id="teacherNav">
        <ul>
          <li class="nav-item active">
            <a href="#reminders" class="nav-link" data-section="reminders">
              <span class="nav-icon">â°</span>
              <span class="nav-text">æ•™å¸ˆæé†’</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#tasks" class="nav-link" data-section="tasks">
              <span class="nav-icon">âœ…</span>
              <span class="nav-text">ç‚¹è¯„ä»»åŠ¡</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="#feedbacks" class="nav-link" data-section="feedbacks">
              <span class="nav-icon">ğŸ“</span>
              <span class="nav-text">æŸ¥çœ‹ç‚¹è¯„</span>
            </a>
          </li>
        </ul>
      </nav>
    </aside>

    <main class="content">
      <section id="teacherBoard" class="teacher-board">
        <div class="board-header">
          <div>
            <strong>æ•™å¸ˆå…¬å‘Šæ </strong>
            <span class="muted" style="margin-left: 8px;">å…¬å‘Šä¸æ”¶åˆ°çš„æé†’ï¼ˆæŒ‰æ—¶é—´æ’åºï¼‰</span>
          </div>
          <div class="board-actions">
            <button class="btn btn-secondary" id="toggleBoardBtn">æ”¶èµ·</button>
            <button class="btn btn-primary" id="refreshBoardBtn">åˆ·æ–°</button>
          </div>
        </div>

        <div class="board-content">
          <div class="section">
            <h4>å…¬å‘Š</h4>
            <div id="announcementsList">
              <div class="list-row">åŠ è½½ä¸­...</div>
            </div>
            <div class="board-pagination">
              <button class="btn btn-secondary" id="annPrevBtn">ä¸Šä¸€é¡µ</button>
              <span id="annPageInfo">ç¬¬ 1 é¡µ</span>
              <button class="btn btn-secondary" id="annNextBtn">ä¸‹ä¸€é¡µ</button>
            </div>
          </div>

          <div class="section">
            <h4>æ”¶åˆ°çš„æé†’</h4>
            <div id="remindersList">
              <div class="list-row">åŠ è½½ä¸­...</div>
            </div>
            <div class="board-pagination">
              <button class="btn btn-secondary" id="remPrevBtn">ä¸Šä¸€é¡µ</button>
              <span id="remPageInfo">ç¬¬ 1 é¡µ</span>
              <button class="btn btn-secondary" id="remNextBtn">ä¸‹ä¸€é¡µ</button>
            </div>
          </div>
        </div>
      </section>

      <section id="remindersTab" class="section" style="display: block;">
        <div class="toolbar">
          <input type="text" id="remInbQ" placeholder="æœç´¢æé†’å†…å®¹/å­¦å‘˜æ˜µç§°/å°é¹…é€šID" />
          <button class="btn btn-primary" id="remInbSearchBtn">æœç´¢</button>
          <button class="btn btn-secondary" id="remInbRefresh">åˆ·æ–°</button>
          <label class="muted">
            <input type="checkbox" id="remInbSelectAll" />
            å…¨é€‰
          </label>
          <button class="btn" id="remInbMarkReadSelectedBtn">æ ‡è®°æ‰€é€‰ä¸ºå·²è¯»</button>
        </div>
        <div id="remInbList">
          <div class="list-row">åŠ è½½ä¸­...</div>
        </div>
        <div class="board-pagination">
          <button class="btn btn-secondary" id="remInbPrev">ä¸Šä¸€é¡µ</button>
          <span id="remInbPageInfo">ç¬¬ 1 é¡µ</span>
          <button class="btn btn-secondary" id="remInbNext">ä¸‹ä¸€é¡µ</button>
        </div>
      </section>

      <section id="tasksTab" class="tab" style="display: none;">
        <div class="toolbar">
          <select id="taskStatusFilter">
            <option value="pending">æœªå®Œæˆ</option>
            <option value="completed">å·²å®Œæˆ</option>
            <option value="">å…¨éƒ¨</option>
          </select>
          <button id="tasksRefresh">åˆ·æ–°</button>
        </div>

        <div id="tasksList"></div>

        <div class="pagination">
          <button id="tasksPrev">ä¸Šä¸€é¡µ</button>
          <span id="tasksPage"></span>
          <button id="tasksNext">ä¸‹ä¸€é¡µ</button>
        </div>
      </section>

      <section id="feedbacksTab" class="section" style="display: none;">
        <div class="toolbar">
          <input type="text" id="fbQ" placeholder="æœç´¢å­¦å‘˜/æ•™å¸ˆ/ç‚¹è¯„æ­£æ–‡" />
          <label>å¼€å§‹ï¼š
            <input type="date" id="fbStart" />
          </label>
          <label>ç»“æŸï¼š
            <input type="date" id="fbEnd" />
          </label>
          <button class="btn btn-primary" id="fbSearchBtn">æœç´¢</button>
          <button class="btn btn-secondary" id="fbRefresh">åˆ·æ–°</button>
        </div>
        <div id="fbList">
          <div class="list-row">åŠ è½½ä¸­...</div>
        </div>
        <div class="board-pagination">
          <button class="btn btn-secondary" id="fbPrev">ä¸Šä¸€é¡µ</button>
          <span id="fbPageInfo">ç¬¬ 1 é¡µ</span>
          <button class="btn btn-secondary" id="fbNext">ä¸‹ä¸€é¡µ</button>
        </div>
      </section>
    </main>
  </div>

  <script src="js/utils.js"></script>
  <script>
    (function() {
      try {
        const collapsed = Utils.getStorage("ops_sidebar_collapsed");
        if (collapsed === true || collapsed === "true") {
          document.body.classList.add("sidebar-collapsed");
        }
      } catch (_) {}
      document.getElementById("sidebarToggleBtn")?.addEventListener("click", () => {
        document.body.classList.toggle("sidebar-collapsed");
        const isCollapsed = document.body.classList.contains("sidebar-collapsed");
        try { Utils.setStorage("ops_sidebar_collapsed", isCollapsed, true); } catch (_) {}
      });
    })();
  </script>
  <script src="js/auth.js"></script>
  <script src="js/teacher.js"></script>
</body>
</html>